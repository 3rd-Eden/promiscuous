/** @license MIT - promiscuous library - Â©2013 Ruben Verborgh */
!function e(){function t(){var u=function i(l,a,v){if(l!==e){var p=t();return i.c.push({d:p,resolve:l,reject:a}),p.promise}var s;if(null!==v&&(typeof v===c||typeof v===o))try{s=v.then}catch(y){a=!1,v=y}if(typeof s===o){l=u;try{s.call(this,function(t){s&&(s=null,l(e,!0,t))},function(t){s&&(s=null,l(e,!1,t))})}catch(y){s&&(s=null,l(e,!1,y))}}else{for(var h=a?"resolve":"reject",j=i.c,m=0,d=j.length;d>m;m++){var b=j[m],g=b.d,w=b[h];typeof w!==o?g[h](v):n(w,v,g)}u=r(f,v,a)}},f={then:function(e,t){return u(e,t)}};return u.c=[],{promise:f,resolve:function(t){u.c&&u(e,!0,t)},reject:function(t){u.c&&u(e,!1,t)}}}function r(e,r,c){return function(u,f){var i,l=c?u:f;return typeof l!==o?e:(n(l,r,i=t()),i.promise)}}function n(e,t,r){setTimeout(function(){try{var n=e(t),u=null!==n&&(typeof n===c||typeof n===o)&&n.then;typeof u!==o?r.resolve(n):n===r.promise?r.reject(new TypeError):u.call(n,r.resolve,r.reject)}catch(f){r.reject(f)}})}var o="function",c="object";window.promiscuous={resolve:function(e){var t={};return t.then=r(t,e,!0),t},reject:function(e){var t={};return t.then=r(t,e,!1),t},deferred:t}}();